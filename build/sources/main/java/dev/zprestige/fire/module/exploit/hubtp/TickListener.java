package dev.zprestige.fire.module.exploit.hubtp;

import dev.zprestige.fire.event.bus.EventListener;
import dev.zprestige.fire.event.impl.TickEvent;
import net.minecraft.network.play.client.CPacketConfirmTeleport;
import net.minecraft.network.play.client.CPacketPlayer;

public class TickListener extends EventListener<TickEvent, HubTP> {

    public TickListener(final HubTP hubTP){
        super(TickEvent.class, hubTP);
    }

    @Override
    public void invoke(final Object object){
        if (module.success()) {
            module.disableModule();
            return;
        }
        mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, module.random.nextInt(50) + 127, mc.player.posZ, mc.player.onGround));
        mc.player.connection.sendPacket(new CPacketConfirmTeleport(module.teleportId + 1));
    }
}
