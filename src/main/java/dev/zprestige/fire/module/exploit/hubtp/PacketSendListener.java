package dev.zprestige.fire.module.exploit.hubtp;

import dev.zprestige.fire.event.bus.EventListener;
import dev.zprestige.fire.event.impl.PacketEvent;
import net.minecraft.network.play.client.CPacketConfirmTeleport;
import net.minecraft.network.play.client.CPacketPlayer;

public class PacketSendListener extends EventListener<PacketEvent.PacketSendEvent, HubTP> {

    public PacketSendListener(final HubTP hubTP){
        super(PacketEvent.PacketSendEvent.class, hubTP);
    }

    @Override
    public void invoke(final Object object){
        final PacketEvent.PacketSendEvent event = (PacketEvent.PacketSendEvent) object;
        if (event.getPacket() instanceof CPacketPlayer.Position || event.getPacket() instanceof CPacketPlayer.PositionRotation) {
            final CPacketPlayer packet = (CPacketPlayer) event.getPacket();
            packet.y += 0.30f;
        }

        if (event.getPacket() instanceof CPacketConfirmTeleport) {
            final CPacketConfirmTeleport packet = (CPacketConfirmTeleport) event.getPacket();
            module.teleportId = packet.getTeleportId();
        }
    }
}
