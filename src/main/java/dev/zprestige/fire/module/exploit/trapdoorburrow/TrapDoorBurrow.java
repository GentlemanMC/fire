package dev.zprestige.fire.module.exploit.trapdoorburrow;

import dev.zprestige.fire.Main;
import dev.zprestige.fire.module.Descriptor;
import dev.zprestige.fire.module.Module;
import dev.zprestige.fire.settings.impl.Slider;
import dev.zprestige.fire.settings.impl.Switch;
import dev.zprestige.fire.util.impl.BlockUtil;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.EnumHand;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.Vec3d;

@Descriptor(description = "Burrows you with a trapdoor to bypass 2b2tpvp")
public class TrapDoorBurrow extends Module {
    public final Slider fallSpeed = Menu.Slider("Fall Speed", 1.0f, 1.0f, 20.0f);
    public final Switch instant = Menu.Switch("Instant", false);
    public final Slider instantFactor = Menu.Slider("Instant Factor", 20.0f, 1.1f, 500.0f).visibility(z -> instant.GetSwitch());
    protected boolean opened;
    protected BlockPos pos;
    protected float savedPitch;


    @Override
    public void onEnable() {
        pos = BlockUtil.getPosition();
        opened = false;
        savedPitch = mc.player.rotationPitch;
        mc.player.rotationPitch = 90;
    }

    @Override
    public void onDisable() {
        Main.tickManager.syncTimer();
        mc.player.rotationPitch = savedPitch;
    }

    protected void interactTrapdoor(final Vec3d vec) {
        mc.playerController.processRightClickBlock(mc.player, mc.world, pos, EnumFacing.UP, vec, EnumHand.MAIN_HAND);
    }
}
