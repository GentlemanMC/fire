package dev.zprestige.fire.module.exploit.hubtp

import dev.zprestige.fire.event.bus.EventListener
import dev.zprestige.fire.event.impl.TickEvent
import net.minecraft.network.play.client.CPacketConfirmTeleport
import net.minecraft.network.play.client.CPacketPlayer

class TickListener(hubTP: HubTP) : EventListener<TickEvent, HubTP>(
    TickEvent::class.java, hubTP
) {
    override fun invoke(e: Any) {
        if (module.success()) {
            module.disableModule()
            return
        }
        mc.player.connection.sendPacket(CPacketPlayer.Position(mc.player.posX,
            (module.random.nextInt(50) + 127).toDouble(),
            mc.player.posZ,
            mc.player.onGround
        )
        )
        mc.player.connection.sendPacket(CPacketConfirmTeleport(module.teleportId + 1))
    }
}
